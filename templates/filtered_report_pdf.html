<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BloodBank Report</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; font-size: 12px; }
        h1 { color: #dc3545; text-align: center; margin-bottom: 5px; }
        h2 { color: #dc3545; border-bottom: 2px solid #dc3545; padding-bottom: 5px; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        th, td { border: 1px solid #444; padding: 6px; text-align: left; }
        th { background-color: #f8d7da; }
        tr:nth-child(even) { background-color: #f9f9f9; }
        .totals { font-weight: bold; background: #f1f1f1; }
        .section { margin-top: 20px; }
        .date-range { text-align: center; margin-bottom: 20px; font-size: 13px; color: #555; }

        /* Simple header/footer boxes */
        .header {
            text-align: center;
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 10px;
            border-bottom: 2px solid #dc3545;
            padding-bottom: 5px;
        }
        .footer {
            text-align: center;
            font-size: 11px;
            color: #666;
            border-top: 1px solid #ccc;
            margin-top: 30px;
            padding-top: 5px;
        }
    </style>
</head>
<body>

    <!-- HEADER -->
    <div class="header">
         <h1 style="text-align:center; color:#dc3545;">ðŸ©¸ BloodBank and Donor Management System</h1>
    </div>

    <h1>ðŸ“Š Report</h1>
    <p class="date-range">
        Report generated on {{ now }} <br>
        {% if start_date and end_date %}
            <strong>From:</strong> {{ start_date }} &nbsp;&nbsp; <strong>To:</strong> {{ end_date }}
        {% else %}
            (Full Data Report)
        {% endif %}
    </p>

    {% if donors %}
    <div class="section">
        <h2>ðŸ“‹ Donor List</h2>
        <table>
            <thead>
                <tr><th>Name</th><th>Blood Group</th><th>City</th><th>Contact</th></tr>
            </thead>
            <tbody>
                {% for donor in donors %}
                <tr>
                    <td>{{ donor.name }}</td>
                    <td>{{ donor.blood_group }}</td>
                    <td>{{ donor.city }}</td>
                    <td>{{ donor.contact }}</td>
                </tr>
                {% endfor %}
                <tr class="totals">
                    <td colspan="4">Total Donors: {{ donors|length }}</td>
                </tr>
            </tbody>
        </table>
    </div>
    {% endif %}

    {% if blood_stock %}
    <div class="section">
        <h2>ðŸ©¸ Blood Stock</h2>
        <table>
            <thead>
                <tr><th>Blood Group</th><th>Units Available</th></tr>
            </thead>
            <tbody>
                {% for stock in blood_stock %}
                <tr>
                    <td>{{ stock.blood_group }}</td>
                    <td>{{ stock.units }}</td>
                </tr>
                {% endfor %}
                <tr class="totals">
                    <td colspan="2">Total Groups: {{ blood_stock|length }}</td>
                </tr>
            </tbody>
        </table>
    </div>
    {% endif %}

    {% if blood_requests %}
    <div class="section">
        <h2>ðŸ§¾ Blood Requests</h2>
        <table>
            <thead>
                <tr><th>Name</th><th>Blood Group</th><th>City</th><th>Contact</th><th>Status</th></tr>
            </thead>
            <tbody>
                {% for request in blood_requests %}
                <tr>
                    <td>{{ request.name }}</td>
                    <td>{{ request.blood_group }}</td>
                    <td>{{ request.city }}</td>
                    <td>{{ request.contact }}</td>
                    <td>{{ request.status }}</td>
                </tr>
                {% endfor %}
                <tr class="totals">
                    <td colspan="5">Total Requests: {{ blood_requests|length }}</td>
                </tr>
            </tbody>
        </table>
    </div>
    {% endif %}

    <!-- FOOTER -->
    <div class="footer">
        Â© 2025 BloodBank Project - All Rights Reserved
    </div>

</body>
</html>
